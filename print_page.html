
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.3.2">
    
    
      
        <title>Print as PDF - Commander Spellbook</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.5d38496d.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.cbb835fc.min.css">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="css/print-site-enum-headings1.css">
    
      <link rel="stylesheet" href="css/print-site-enum-headings2.css">
    
      <link rel="stylesheet" href="css/print-site-enum-headings3.css">
    
      <link rel="stylesheet" href="css/print-site.css">
    
      <link rel="stylesheet" href="css/print-site-material.css">
    
    <script>__md_scope=new URL("/",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  
        <script type="text/javascript">
        document.addEventListener('DOMContentLoaded', function () {
            remove_material_navigation();remove_mkdocs_theme_navigation();generate_toc();
        })
        </script>
        </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="purple" data-md-color-accent="blue">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="index.html" title="Commander Spellbook" class="md-header__button md-logo" aria-label="Commander Spellbook" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16 9h3l-5 7m-4-7h4l-2 8M5 9h3l2 7m5-12h2l2 3h-3m-5-3h2l1 3h-4M7 4h2L8 7H5m1-5L2 8l10 14L22 8l-4-6H6Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Commander Spellbook
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Print as PDF
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="purple" data-md-color-accent="blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="purple" data-md-color-accent="blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/fearphage/website-v2" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="Commander Spellbook" class="md-nav__button md-logo" aria-label="Commander Spellbook" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16 9h3l-5 7m-4-7h4l-2 8M5 9h3l2 7m5-12h2l2 3h-3m-5-3h2l1 3h-4M7 4h2L8 7H5m1-5L2 8l10 14L22 8l-4-6H6Z"/></svg>

    </a>
    Commander Spellbook
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/fearphage/website-v2" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        Development Docs
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Backend
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Backend" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Backend
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="backend/running-locally.html" class="md-nav__link">
        Running the app locally
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="backend/users.html" class="md-nav__link">
        Authentication/User Accounts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="backend/database.html" class="md-nav__link">
        Database Collections
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="backend/api.html" class="md-nav__link">
        API
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="backend/manual-deploys.html" class="md-nav__link">
        Manual Deploys
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Frontend
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Frontend" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Frontend
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="frontend/installation-and-setup.html" class="md-nav__link">
        Installation and setup
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="frontend/pages.html" class="md-nav__link">
        Creating a new page
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="frontend/components.html" class="md-nav__link">
        Creating a component
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Testing
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Testing" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Testing
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="testing/integration-testing.html" class="md-nav__link">
        Integration Testing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="testing/unit-testing.html" class="md-nav__link">
        Unit Testing
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Print as PDF
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="print_page.html" class="md-nav__link md-nav__link--active">
        Print as PDF
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#" class="md-nav__link">
    1. Development Docs
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-backend" class="md-nav__link">
    I. Backend
  </a>
  
    <nav class="md-nav" aria-label="I. Backend">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#backend-running-locally" class="md-nav__link">
    2. Running the app locally
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backend-users" class="md-nav__link">
    3. Authentication/User Accounts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backend-database" class="md-nav__link">
    4. Database Collections
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backend-api" class="md-nav__link">
    5. API
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backend-manual-deploys" class="md-nav__link">
    6. Manual Deploys
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-frontend" class="md-nav__link">
    II. Frontend
  </a>
  
    <nav class="md-nav" aria-label="II. Frontend">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#frontend-installation-and-setup" class="md-nav__link">
    7. Installation and setup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frontend-pages" class="md-nav__link">
    8. Creating a new page
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frontend-components" class="md-nav__link">
    9. Creating a component
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-testing" class="md-nav__link">
    III. Testing
  </a>
  
    <nav class="md-nav" aria-label="III. Testing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#testing-integration-testing" class="md-nav__link">
    10. Integration Testing
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-unit-testing" class="md-nav__link">
    11. Unit Testing
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#" class="md-nav__link">
    1. Development Docs
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-backend" class="md-nav__link">
    I. Backend
  </a>
  
    <nav class="md-nav" aria-label="I. Backend">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#backend-running-locally" class="md-nav__link">
    2. Running the app locally
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backend-users" class="md-nav__link">
    3. Authentication/User Accounts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backend-database" class="md-nav__link">
    4. Database Collections
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backend-api" class="md-nav__link">
    5. API
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backend-manual-deploys" class="md-nav__link">
    6. Manual Deploys
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-frontend" class="md-nav__link">
    II. Frontend
  </a>
  
    <nav class="md-nav" aria-label="II. Frontend">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#frontend-installation-and-setup" class="md-nav__link">
    7. Installation and setup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frontend-pages" class="md-nav__link">
    8. Creating a new page
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frontend-components" class="md-nav__link">
    9. Creating a component
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-testing" class="md-nav__link">
    III. Testing
  </a>
  
    <nav class="md-nav" aria-label="III. Testing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#testing-integration-testing" class="md-nav__link">
    10. Integration Testing
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-unit-testing" class="md-nav__link">
    11. Unit Testing
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
  
                


<div id="print-site-page" class="print-site-enumerate-headings print-site-enumerate-figures">
        <div id="print-site-banner">
            <p>
    <em>This box will disappear when printing</em>
    <span style="float: right"><a href="https://timvink.github.io/mkdocs-print-site-plugin/">mkdocs-print-site-plugin</a></span>
</p>
<p>
    This page has combined all site pages into one. You can export to PDF using <b>File > Print > Save as PDF</b>.
</p>
<p>
    See also <a href="https://timvink.github.io/mkdocs-print-site-plugin/how-to/export-PDF.html">export to PDF</a> and <a href="https://timvink.github.io/mkdocs-print-site-plugin/how-to/export-HTML.html">export to standalone HTML</a>.
</p>
        </div>
        
        <section class="print-page">
            <div id="print-page-toc" data-toc-depth="3">
                <nav role='navigation' class='print-page-toc-nav'>
                <h1 class='print-page-toc-title'>Index</h1>
                </nav>
            </div>
        </section>
        <section class="print-page" id="index"><h1 id="index-development-docs">Development Docs</h1>
<p>This documentation is rendered as a website on <a href="https://commander-spellbook.github.io/website-v2/">GitHub Pages</a>. Any change to markdown files will be deployed after it gets merged into the <code>main</code> branch.</p>
<h2 id="index-getting-started">Getting Started</h2>
<p>The site requires <a href="https://nodejs.org/en/download/">node v16</a> and npm 8 (which comes installed with node@16) to run locally, since it utilizes <a href="https://docs.npmjs.com/cli/v8/using-npm/workspaces">npm workspaces</a> to structure the repo.</p>
<p>If you are already using the <a href="https://github.com/nvm-sh/nvm">Node Version Manager (nvm)</a> tool, you can run <code>nvm install</code> in the directory to get the correct version of node.</p>
<p>Once you have installed node, you can install the project's dependencies:</p>
<div class="highlight"><pre><span></span><code>npm install
</code></pre></div>
<h2 id="index-frontend-app">Frontend App</h2>
<ul>
<li><a href="#frontend-installation-and-setup">Installation and setup</a></li>
<li><a href="#frontend-pages">Creating a new page</a></li>
<li><a href="#frontend-components">Creating a component</a></li>
</ul>
<h2 id="index-backend-api">Backend API</h2>
<p>The backend (auth, api, database) is all managed by <a href="https://firebase.google.com/">Firebase</a>.</p>
<ul>
<li><a href="#backend-running-locally">Running the app locally</a></li>
<li><a href="#backend-users">Authentication/User Accounts</a></li>
<li><a href="#backend-database">Database Collections</a></li>
<li><a href="#backend-api">API</a></li>
<li><a href="#backend-manual-deploys">Manual Deploys</a></li>
</ul>
<h2 id="index-automated-testing">Automated Testing</h2>
<ul>
<li><a href="#testing-unit-testing">Unit Testing</a></li>
<li><a href="#testing-integration-testing">Integration Testing</a></li>
</ul></section>
                        <h1 class='nav-section-title' id='section-backend'>
                            Backend <a class='headerlink' href='#section-backend' title='Permanent link'>↵</a>
                        </h1>
                        <section class="print-page" id="backend-running-locally"><h1 id="backend-running-locally-running-the-app-locally">Running the App Locally</h1>
<p>By default, when you run the frontend app locally, it'll connect to a special Firebase app dedicated for local development of Commander Spellbook. This app gets updates deployed to it automatically whenever updates are deployed to the production Firebase app.</p>
<p>If you do not need to make any changes to the backend Firebase code, you can just <a href="#frontend-installation-and-setup">run the site normally</a>, and it'll connect to the local development instance of Firebase.</p>
<h2 id="backend-running-locally-emulators">Emulators</h2>
<p>If you <em>do</em> need to make changes, you can do so by running the Firebase emulators to see your changes locally without deploying them.</p>
<p>To run the functions, firestore and auth locally, first create or modify an <code>.env</code> file in the root of the repository with <code>USE_FIREBASE_EMULATORS</code> set to true and <code>NODE_ENV</code> set to development:</p>
<div class="highlight"><pre><span></span><code><span class="nv">USE_FIREBASE_EMULATORS</span><span class="o">=</span><span class="nb">true</span>
<span class="nv">NODE_ENV</span><span class="o">=</span>development
</code></pre></div>
<p>You will also need <a href="https://www.java.com/">Java</a> installed on your machine to run the emulators.</p>
<p>Once those tasks are complete, run:</p>
<div class="highlight"><pre><span></span><code>npm run firebase:emulate
</code></pre></div>
<p>The firebase emulators will start running. Once the frontend app is running, you should see a warning on the bottom of the screen of the app that it is using local emulators.</p>
<p>Running the emulators will allow you to test changes without modifying any data or deploying changes to the local development instance of the Firebase project.</p></section><section class="print-page" id="backend-users"><h1 id="backend-users-user-accounts">User Accounts</h1>
<h2 id="backend-users-email-link">Email Link</h2>
<p>We use the <a href="https://firebase.google.com/docs/auth/web/email-link-auth">Firebase Email Link strategy</a> for creating accounts and logging in. Basically, instead of having our users remember a password to log in, they simply enter their email and then click the link that gets emailed to them. That opens them back on the website and they are logged in!</p>
<h2 id="backend-users-user-permissions">User Permissions</h2>
<p>After a user logs in for the first time, the site will automatically attempt to <code>provision</code> the user. This essentially means that the site will validate that the user's chosen username is available and then the user will be given the default permissions for actions on the site. Namely, the ability to propose new combos.</p>
<p>Every time the user loads the user dashboard, the site will check if the user has already been provisioned, and then display the parts of the dashboard they are allowed to see.</p>
<p>An administrator with the <code>manageUsers</code> permission can modify what a user is allowed to do as well as details about the user (such as display name, their email or username).</p>
<p>Here are the following permissions a user can have:</p>
<ul>
<li><code>provisioned</code> - when <code>true</code>, the user is created and ready to be used on the site. Not really used for anything other than to determine that the user is fully set up and the initial permissions have been set.</li>
<li><code>proposeCombo</code> - can submit new combos for review on the site</li>
<li><code>manageUsers</code> - can change the user permissions and user details of another user</li>
<li><code>manageSiteContent</code> - can change site settings, such as the parameters for what featured combos there are</li>
<li><code>viewUsers</code> - inspect, but not manage users</li>
</ul></section><section class="print-page" id="backend-database"><h1 id="backend-database-firestore">Firestore</h1>
<p>We use a NoSQL <a href="https://firebase.google.com/products/firestore">Firestore Database</a> to hold the site's data.</p>
<p>(currently, the combos still live in <a href="https://docs.google.com/spreadsheets/d/1KqyDRZRCgy8YgMFnY0tHSw_3jC99Z0zFvJrPbfm66vA/">Google Sheets</a>, but we intend to move that over to Firestor in the near future)</p>
<h2 id="backend-database-collections">Collections</h2>
<p>Current collections are:</p>
<ul>
<li><a href="#backend-database-site-settings">site-settings</a></li>
<li><a href="#backend-database-user-profiles">user-profiles</a></li>
<li><a href="#backend-database-usernames">usernames</a></li>
</ul>
<p>They can be used in the <a href="#backend-api">api</a> via the database model abstractions found at <code>/backend/db/*.ts</code>.</p>
<h3 id="backend-database-site-settings">Site Settings</h3>
<p>This collection is for data on the site that may need to be updated by a user with the <code>manageSiteContent</code> permission.</p>
<p>So far, the only document is <code>featured-combos</code> which includes the button text display on the home page for featured combos and determines the rules by which combos are selected to be featured.</p>
<h3 id="backend-database-user-profiles">User Profiles</h3>
<p>This collection contains additional data about the user, such as the user's username. The key for each user-profile is the user id of the owner.</p>
<h3 id="backend-database-usernames">Usernames</h3>
<p>This collection is to enforce a uniqueness constraint on the user's username. The key is the user's username, but with all lowercase letters and punctuation removed.</p>
<h2 id="backend-database-rules">Rules</h2>
<p>The <a href="../firestore.rules"><code>firestore.rules</code></a> file dictates the changes that can be made to documents in the Firestore database on the client. Warning: these rules do not apply when using functions along with the <code>firebase-admin</code> module.</p>
<p>Typically, changes to the database will all run through the API (which use the <code>firebase-admin</code> module). Exceptions can happen for loading data into the site from a read-only model. (such as creating the featured combos page)</p></section><section class="print-page" id="backend-api"><h1 id="backend-api-api">API</h1>
<p>The <code>backend/src/api</code> directory dictates the public API and is written as an <a href="https://expressjs.com/">express application</a>.</p>
<p>All requests to the API validate the user's authorization token and attach the user id and permissions to the request.</p>
<h2 id="backend-api-routing">Routing</h2>
<div class="highlight"><pre><span></span><code>/v1/site-settings/*
/v1/user/*
</code></pre></div>
<h3 id="backend-api-site-settings">Site Settings</h3>
<p>For updating settings specific to the site, such as the featured combos.</p>
<h3 id="backend-api-user">User</h3>
<p>For updating info about the user who is using the site.</p>
<h2 id="backend-api-middleware">Middleware</h2>
<p>If a collection of routes all require the same validation (such as a user permission), write <a href="https://expressjs.com/en/guide/using-middleware.html">middleware</a> for it.</p>
<h2 id="backend-api-succces-responses">Succces Responses</h2>
<p>When reporting that a request is successful, use a status of <code>200</code> when the operation is complete and no changes were made (such as from a standard <code>GET</code> request) and a <code>201</code> when the operation caused a change to happen (such as from a standard <code>POST</code> request).</p>
<p>Chain the status call with JSON indicating that the request was succesful and any other data that needs to be passed back in the request.</p>
<div class="highlight"><pre><span></span><code><span class="c1">// the request was succesful when no changes were made</span><span class="w"></span>
<span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">200</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span><span class="w"></span>
<span class="w">  </span><span class="nx">success</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="c1">// whatever relevant data is being passed down</span><span class="w"></span>
<span class="w">  </span><span class="nx">foo</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;bar&quot;</span><span class="p">,</span><span class="w"></span>
<span class="p">});</span><span class="w"></span>

<span class="c1">// the request was succesful and a change was made in the DB</span><span class="w"></span>
<span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">201</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span><span class="w"></span>
<span class="w">  </span><span class="nx">success</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="c1">// whatever relevant data is being passed down</span><span class="w"></span>
<span class="w">  </span><span class="nx">foo</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;bar&quot;</span><span class="p">,</span><span class="w"></span>
<span class="p">});</span><span class="w"></span>
</code></pre></div>
<h2 id="backend-api-error-handling">Error Handling</h2>
<p>JavaScript <code>Error</code> objects cannot be serialized meaningfully (It'll lose the message when turned into a JSON string), so instead we use a custom error object.</p>
<p>Use the following status in the following circumstances:</p>
<ul>
<li>400 - when required parameters are missing</li>
<li>422 - when required parameters are present, but in an incorrect form</li>
<li>403 - when the user does not have permission to do the operation</li>
<li>404 - when the requested resource is not present</li>
<li>500 - when it's a unknown error</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nx">NotFoundError</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nx">PermissionError</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nx">UnknownError</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nx">ValidationError</span><span class="p">,</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;../api/error&quot;</span><span class="p">;</span><span class="w"></span>

<span class="c1">// user does not have permission for this action</span><span class="w"></span>
<span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">403</span><span class="p">).</span><span class="nx">json</span><span class="p">(</span><span class="ow">new</span><span class="w"> </span><span class="nx">PermissionError</span><span class="p">(</span><span class="s2">&quot;Custom error message&quot;</span><span class="p">));</span><span class="w"></span>

<span class="c1">// the resource could not be found</span><span class="w"></span>
<span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">403</span><span class="p">).</span><span class="nx">json</span><span class="p">(</span><span class="ow">new</span><span class="w"> </span><span class="nx">NotFoundError</span><span class="p">(</span><span class="s2">&quot;Custom error message&quot;</span><span class="p">));</span><span class="w"></span>

<span class="c1">// a required post body param is missing</span><span class="w"></span>
<span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">400</span><span class="p">).</span><span class="nx">json</span><span class="p">(</span><span class="ow">new</span><span class="w"> </span><span class="nx">ValidationError</span><span class="p">(</span><span class="s2">&quot;Custom error message&quot;</span><span class="p">));</span><span class="w"></span>

<span class="c1">// the required param is present, but it is in the wrong format</span><span class="w"></span>
<span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">422</span><span class="p">).</span><span class="nx">json</span><span class="p">(</span><span class="ow">new</span><span class="w"> </span><span class="nx">ValidationError</span><span class="p">(</span><span class="s2">&quot;Custom error message&quot;</span><span class="p">));</span><span class="w"></span>

<span class="c1">// something went wrong, but we&#39;re not sure what it was</span><span class="w"></span>
<span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">500</span><span class="p">).</span><span class="nx">json</span><span class="p">(</span><span class="ow">new</span><span class="w"> </span><span class="nx">UnknownError</span><span class="p">(</span><span class="s2">&quot;Custom error message&quot;</span><span class="p">));</span><span class="w"></span>
</code></pre></div></section><section class="print-page" id="backend-manual-deploys"><h1 id="backend-manual-deploys-deplopying-to-firebase">Deplopying to Firebase</h1>
<h2 id="backend-manual-deploys-before-you-start">Before you start</h2>
<p>If you do not have access to the Firebase console for the project, you will not be able to deploy changes to the Firestore configuration and Functions. If you believe you should have access, discuss it with the moderators in the <a href="https://discord.gg/KDnvP5f">Commander Spellbook Discord server</a>.</p>
<h2 id="backend-manual-deploys-deploys">Deploys</h2>
<p>First, log in to Firebase. (if you are not a member of the Firebase project you are attemptting to deploy to, you will be unable to do the deploys)</p>
<div class="highlight"><pre><span></span><code>npm run firebase:login
</code></pre></div>
<p>Choose the environment you are deploying to:</p>
<div class="highlight"><pre><span></span><code>npm run firebase:deploy:local
npm run firebase:deploy:staging
npm run firebase:deploy:prod
</code></pre></div>
<p>Whenever you deploy to <code>staging</code> or <code>prod</code>, it will auto switch back the context to <code>local</code> when it finishes.</p>
<p><code>prod</code> and <code>local</code> automatically deploy whenever the site is deployed via <a href="https://github.com/features/actions">Github Actions</a>.</p></section><h1 class='nav-section-title-end'>Ended: Backend</h1>
                        <h1 class='nav-section-title' id='section-frontend'>
                            Frontend <a class='headerlink' href='#section-frontend' title='Permanent link'>↵</a>
                        </h1>
                        <section class="print-page" id="frontend-installation-and-setup"><h1 id="frontend-installation-and-setup-frontend-app-setup">Frontend App Setup</h1>
<p>The frontend uses <a href="https://nuxtjs.org/">Nuxt@v2</a> to create the app.</p>
<h2 id="frontend-installation-and-setup-installation-requirements">Installation Requirements</h2>
<p>See the <a href="#index-getting-started">Getting Started instructions</a> for details about installing node.</p>
<h2 id="frontend-installation-and-setup-build-setup">Build Setup</h2>
<div class="highlight"><pre><span></span><code><span class="c1"># serve with hot reload at localhost:3000, specify PORT=&lt;whatever&gt; to change the port</span>
$ npm run dev
</code></pre></div>
<p>If you want to see how the app will behave in production, build and run it:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># build for production (this will take a while)</span>
$ npm run build-frontend
<span class="c1"># runs the site in prod mode using the generated pages from the build-frontend step</span>
$ npm start
</code></pre></div>
<p>For detailed explanation on how things work, check out <a href="https://nuxtjs.org">Nuxt.js docs</a>.</p></section><section class="print-page" id="frontend-pages"><h1 id="frontend-pages-pages">Pages</h1>
<p>Create a <code>vue</code> component in the pages directory, where the name of the file is the path a user will navigate to in the url.</p>
<p>In general, try to keep page logic simple. Pull any complex logic out into a component in the <code>components</code> directory in a folder with the same name as the route.</p></section><section class="print-page" id="frontend-components"><h1 id="frontend-components-components">Components</h1>
<p>Create a <code>vue</code> component in the <code>components</code> directory. If it's a component specific to a page, nest it in a directory with the same name as the the page.</p>
<p>The component name should be at least 2 words. This is a linting rule to prevent colliding with exisitng HTML DOM nodes.</p></section><h1 class='nav-section-title-end'>Ended: Frontend</h1>
                        <h1 class='nav-section-title' id='section-testing'>
                            Testing <a class='headerlink' href='#section-testing' title='Permanent link'>↵</a>
                        </h1>
                        <section class="print-page" id="testing-integration-testing"><h1 id="testing-integration-testing-integration-testing">Integration Testing</h1>
<p>Our integration tests use <a href="https://www.cypress.io/">Cypress</a> as our test runner.</p>
<h2 id="testing-integration-testing-what-to-test">What to test</h2>
<p>Unlike unit tests, we really only want to test broad strokes behavior. The most common usages of the app, to ensure the functionality of the app remains unbroken.</p>
<h2 id="testing-integration-testing-how-to-run-the-tests">How to Run the Tests</h2>
<ul>
<li>Run the firebase emulator. See the <a href="#firebase-updating-firestore-and-functions.md-emulators">Emulators section</a> of the Firebase documentation for details on how to set it up.
  <div class="highlight"><pre><span></span><code>npm run firebase:emulate
</code></pre></div></li>
<li>Run the app
  <div class="highlight"><pre><span></span><code>npm run dev
</code></pre></div></li>
<li>Run the tests
  <div class="highlight"><pre><span></span><code>npm run cy:run
</code></pre></div></li>
</ul>
<h2 id="testing-integration-testing-videosscreenshots">Videos/Screenshots</h2>
<p>By default, because it takes so long to process video, we have the video and screenshot capabilities turned off. If it's useful to inspect the video of what happened after the tests run, you can append this config flag to the test command:</p>
<div class="highlight"><pre><span></span><code>npm run cy:run -- --config video=true,videoUploadOnPasses=true,screenshotOnRunFailure=true
</code></pre></div>
<h2 id="testing-integration-testing-test-users">Test Users</h2>
<p>When the emulators start up, they import users and Firestore documents from the firebase-emulator-seed-data directory.</p>
<p>You can log in as these users within integration tests by using the <code>cy.login</code> function with the id of the user you want to log in as. For instance, to log in as a basic user that has the default permissions for a user:</p>
<div class="highlight"><pre><span></span><code><span class="nx">cy</span><span class="p">.</span><span class="nx">login</span><span class="p">(</span><span class="s2">&quot;basic-user&quot;</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<p>Ids of available users to log in as:</p>
<ul>
<li><code>basic-user</code> - a user with the initial permissions of a user that has just signed up</li>
<li><code>unprovisioned-user</code> - a user that has signed up, but has not completed the sign up process of picking a username</li>
<li><code>email-not-verified</code> - a user that has basic permissions, but has not verified their email</li>
<li><code>site-settings-manager</code> - a user that has basic permissions and can visit the site-settings page</li>
</ul>
<h2 id="testing-integration-testing-updating-seed-data">Updating Seed Data</h2>
<p>To update seed data, run the following command:</p>
<div class="highlight"><pre><span></span><code>npm run firebase:emulate -- --export-on-exit<span class="o">=</span>backend/firebase-emulator-seed-data
</code></pre></div>
<p>Now, any changes you make (adding users, updating documents, etc) will update the seed data that the emulators use once you stop the emulator process.</p>
<h3 id="testing-integration-testing-adding-new-test-users">Adding new test users</h3>
<p>TODO: make a script that can do this programatically</p>
<ol>
<li>With the export flag set, add a user locally in the site.</li>
<li>Set whatever permissions/data are necessary for this test user. (TODO, update instructions once managing user permissions is a thing)</li>
<li>Stop the emulator process (ctrl + c in the pane running it, typically)</li>
<li>Open <code>./firebase-emualtor-seed-data/auth_export/accounts.json</code> and find your user</li>
<li>Update the <code>localId</code> for your user with an id that explains what the user is.</li>
<li>Add it to the list of available users in the documentation above.</li>
<li>Re-run the emulate command with the export flag</li>
<li>Look up the user in user-profiles. Delete the old id and create a new id with the <code>localId</code> chosen</li>
<li>Look up the user in usernames. Update the <code>userId</code> field with the <code>localId</code> chosen</li>
<li>Commit the change for the new test user.</li>
<li>Typically, you'll also add a test for the user.</li>
</ol></section><section class="print-page" id="testing-unit-testing"><h1 id="testing-unit-testing-unit-testing">Unit Testing</h1>
<p>We use <a href="https://jestjs.io/">jest</a> as our test runner.</p>
<p>Any new features added will need to be thoroughly unit tested. If you are unfamiliar with unit testing, but want to make a change, go ahead and open a PR and ask for help getting unit tests set up for your feature.</p></section><h1 class='nav-section-title-end'>Ended: Testing</h1></div>

              

  

            </article>
            
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
<script id="__config" type="application/json">{"base": "/", "features": [], "search": "assets/javascripts/workers/search.b028fd86.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    

<script src="https://unpkg.com/iframe-worker/polyfill"></script>
<script src="search/search_index.js"></script>


    
      <script src="assets/javascripts/bundle.7f366e99.min.js"></script>
      
        <script src="js/print-site.js"></script>
      
        <script src="js/arithmatex.config.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>